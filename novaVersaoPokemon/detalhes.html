<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="detalhes.css">
    <link rel="stylesheet" href="mudarCorClasse.css">
    <title>Detalhes do Pokémon</title>
    <link rel="icon" href="assets/icon/pokebola.ico" type="image/x-icon">

</head>

<body >

    <div id="texto">
        <a href="index.html"><img src="assets/icon/211618_c_left_arrow_icon.png" alt=""></a>
        <h1>Detalhes</h1>

    </div>

    <div class="container-geral-detalhes">
        <section id="pokemonDetails">



        </section>


    </div>


    <div>
        <div id="containerDeBarras"></div>
    </div>
    <script src="script.js"></script>
    <script>



        window.onload = carregarDetalhesDoPokemon;

        function carregarDetalhesDoPokemon() {
            const parametrosURL = new URLSearchParams(window.location.search);
            const id = parametrosURL.get('id');

            const arrayPokemonsArmazenado = sessionStorage.getItem('arrayPokemons');
            const arrayPokemons = arrayPokemonsArmazenado ? JSON.parse(arrayPokemonsArmazenado) : [];

            const pokemon = arrayPokemons.find(p => p.id === parseInt(id));
            console.log(pokemon)

            const divDetalhesPokemon = document.getElementById('pokemonDetails');

            divDetalhesPokemon.innerHTML = `
                <h2>${pokemon.nome}</h2>
                <h3>Tipo(s):</h3>
                <ul>
                    ${pokemon.tipo.map(tipo => `<li>${tipo.toUpperCase()}</li>`).join('')}
                </ul>
                <h3>Moves:</h3>
                <ul>
                    ${pokemon.moves.map(move => `<li>${move.toUpperCase()}</li>`).join('')}
                </ul>
                <h3>Estatísticas:</h3>
                <ul>
                    ${pokemon.stats.map(stat => `<li>${stat.nome.toUpperCase()} - ${stat.valor}</li>`).join('')}
                </ul>
                <h3>Imagens:</h3>
                <ul id='imagens'>
                   <img src='${pokemon.imgCostas}'> </img>
                   <img src='${pokemon.imgFrente}'> </img>
                    
                </ul>
                
            `;

            divDetalhesPokemon.style.backgroundColor = corPorTipo(pokemon).corBackground;
            divDetalhesPokemon.style.color = corPorTipo(pokemon).corTexto
            document.querySelectorAll('h3').forEach(element => {
                element.style.color = corPorTipo(pokemon).corTexto
            });

        }


        function barra(pokemon) {
            pokemon.stats.forEach(stat => {
                const hp = stat.valor;
                const nomeDaEstatistica = stat.nome;
                const larguraBarra = `${hp}%`;


                const barraDeProgresso = document.createElement('div');
                barraDeProgresso.className = 'barraDeProgresso';


                const barraDeProgressoInterior = document.createElement('div');
                barraDeProgressoInterior.className = 'barraDeProgressoInterior';
                barraDeProgressoInterior.style.width = larguraBarra;
                barraDeProgressoInterior.style.backgroundColor = corPorTipo(pokemon).corBackground


                barraDeProgresso.appendChild(barraDeProgressoInterior);


                const nomeElemento = document.createElement('div');
                nomeElemento.className = 'nomeDaEstatistica';
                nomeElemento.textContent = nomeDaEstatistica;


                barraDeProgresso.appendChild(nomeElemento);


                containerDeBarras.appendChild(barraDeProgresso);
            });
        }

    </script>
</body>

</html>